send email
<input type="email" id="resetEmail" placeholder="Enter your email">
<input type="password" id="currentPassword" placeholder="Enter your current password">
<button id="reset-button">Reset Password</button>
<p id="resetMessage"></p>


import { signInWithEmailAndPassword, sendPasswordResetEmail } from "firebase/auth";

try {
    // Try signing in first
    const userCredential = await signInWithEmailAndPassword(auth, email, currentPassword);

    // If this succeeds, user really knows the password
    await sendPasswordResetEmail(auth, email);
    resetMessage.style.color = "green";
    resetMessage.textContent = "✅ Password reset email sent!";
} catch (error) {
    // Login failed → wrong password or email
    resetMessage.style.color = "red";
    resetMessage.textContent = "❌ Email or password is incorrect.";
}











In app
<input type="password" id="currentPassword" placeholder="Current Password">
<input type="password" id="newPassword" placeholder="New Password">
<button id="changePasswordBtn">Change Password</button>
<p id="passwordMessage"></p>

import { auth, db } from "../firebase.js";
import { EmailAuthProvider, reauthenticateWithCredential, updatePassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const currentPasswordInput = document.getElementById("currentPassword");
const newPasswordInput = document.getElementById("newPassword");
const changePasswordBtn = document.getElementById("changePasswordBtn");
const passwordMessage = document.getElementById("passwordMessage");

changePasswordBtn.addEventListener("click", async () => {
    const user = auth.currentUser; // Currently logged-in user
    const currentPassword = currentPasswordInput.value.trim();
    const newPassword = newPasswordInput.value.trim();

    if (!currentPassword || !newPassword) {
        passwordMessage.style.color = "red";
        passwordMessage.textContent = "❌ Please fill in both fields";
        return;
    }

    try {
        // 1️⃣ Re-authenticate the user using their current password
        const credential = EmailAuthProvider.credential(user.email, currentPassword);
        await reauthenticateWithCredential(user, credential);

        // 2️⃣ Update password
        await updatePassword(user, newPassword);

        passwordMessage.style.color = "green";
        passwordMessage.textContent = "✅ Password updated successfully!";
    } catch (error) {
        console.error("❌ Error updating password:", error);
        passwordMessage.style.color = "red";

        if (error.code === "auth/wrong-password") {
            passwordMessage.textContent = "❌ Current password is incorrect";
        } else if (error.code === "auth/weak-password") {
            passwordMessage.textContent = "❌ Password is too weak (min 6 characters)";
        } else {
            passwordMessage.textContent = "❌ Password update failed. Try again.";
        }
    }
});















<input type="email" id="newEmail" placeholder="New Email Address">
<input type="password" id="currentPassword" placeholder="Current Password">
<button id="changeEmailBtn">Change Email</button>
<p id="emailMessage"></p>







import { auth } from "../firebase.js";
import {
  EmailAuthProvider,
  reauthenticateWithCredential,
  verifyBeforeUpdateEmail
} from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const newEmailInput = document.getElementById("newEmail");
const currentPasswordInput = document.getElementById("currentPassword");
const changeEmailBtn = document.getElementById("changeEmailBtn");
const emailMessage = document.getElementById("emailMessage");

changeEmailBtn.addEventListener("click", async () => {
  const user = auth.currentUser;
  const newEmail = newEmailInput.value.trim();
  const currentPassword = currentPasswordInput.value.trim();

  if (!newEmail || !currentPassword) {
    emailMessage.style.color = "red";
    emailMessage.textContent = "❌ All fields are required";
    return;
  }

  try {
    // 1️⃣ Re-authenticate user
    const credential = EmailAuthProvider.credential(
      user.email,
      currentPassword
    );
    await reauthenticateWithCredential(user, credential);

    // 2️⃣ Send verification email to NEW email
    await verifyBeforeUpdateEmail(user, newEmail);

    emailMessage.style.color = "green";
    emailMessage.innerHTML = `
      ✅ Verification email sent to <strong>${newEmail}</strong>.<br>
      Please verify it to complete the email change.
    `;
  } catch (error) {
    console.error("❌ Email change error:", error);
    emailMessage.style.color = "red";

    if (error.code === "auth/wrong-password") {
      emailMessage.textContent = "❌ Incorrect password";
    } else if (error.code === "auth/email-already-in-use") {
      emailMessage.textContent = "❌ Email already in use";
    } else if (error.code === "auth/invalid-email") {
      emailMessage.textContent = "❌ Invalid email address";
    } else {
      emailMessage.textContent = "❌ Failed to change email. Try again.";
    }
  }
});
