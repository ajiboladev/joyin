<!DOCTYPE html>
<!-- 
    JOYIN Social Media
    Built with passion.
    © 2025 JOYIN. All rights reserved.
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Create Post | JOYIN</title>
    <link rel="stylesheet" href="./upload.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="../joyin-favicon.ico">
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#5b53f2">
    <script src="../pwa-install.js"></script>
</head>
<body>
    <div class="upload-container">
        <!-- Header -->
        <div class="upload-header">
            <button class="back-btn" onclick="window.history.back()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1>Create New Post</h1>
        </div>

        <!-- Post Type Selector -->
        <div class="post-type-selector">
            <button class="type-btn active" data-type="text-image" id="type-text-image">
                <i class="fas fa-font"></i> + <i class="fas fa-image"></i> Text & Image
            </button>
            <button class="type-btn" data-type="text-only" id="type-text-only">
                <i class="fas fa-font"></i> Text Only
            </button>
            <button class="type-btn" data-type="image-only" id="type-image-only">
                <i class="fas fa-image"></i> Image Only
            </button>
        </div>

        <!-- Text Area -->
        <div class="text-area-container" id="text-container">
            <textarea class="post-textarea" 
                      id="post-text" 
                      placeholder="What's on your mind?"
                      maxlength="500"></textarea>
            <div class="char-counter" id="char-counter">
                <span id="char-count">0</span>/500
            </div>
        </div>

        <!-- Image Upload Area -->
        <div class="image-upload-area active" id="image-upload-area">
            <div class="upload-box" id="upload-box">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="upload-text">Upload an Image</div>
                <div class="upload-subtext">Click or drag & drop • JPG, PNG, GIF up to 5MB</div>
            </div>

            <input type="file" 
                   id="image-input" 
                   accept="image/*" 
                   style="display: none;">

            <!-- Image Preview -->
            <div class="image-preview" id="image-preview">
                <img src="" alt="Preview" class="preview-image" id="preview-image">
                <button class="remove-image" id="remove-image">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Post Preview -->
        <div class="post-preview" id="post-preview">
            <div class="preview-header">
                <span>Preview</span>
                <span id="preview-type">Text & Image</span>
            </div>
            <div class="preview-content">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <img id="preview-avatar" src="" 
                         alt="Your Avatar" 
                         class="preview-avatar">
                    <div>
                        <div id="preview-username" style="font-weight: 500;">You</div>
                        <div style="font-size: 12px; color: var(--subtext-color);">Just now</div>
                    </div>
                </div>
                <div class="preview-text" id="preview-text">Your post will appear here...</div>
                <div class="preview-image-container" id="preview-image-container">
                    <!-- Image preview will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Status Message -->
        <div id="upload-status" style="text-align: center; margin: 10px 0; min-height: 20px; font-size: 14px;"></div>

        <!-- Action Buttons -->
        <div class="upload-actions">
            <button class="action-btn clear-btn" id="clear-btn">
                Clear All
            </button>
            <button class="action-btn post-btn" id="post-btn">
                <i class="fas fa-paper-plane"></i> Post
            </button>
        </div>
    </div>

    <!-- Import the JavaScript module -->
    <script type="module" src="./upload.js"></script>
</body>
</html>